---
layout: post
title:  "Welcome to Jekyll!"
date:   2018-01-26 00:11:16 +0900
categories: http, network
---

> HTTP
 - 웹 브라우저와 같은 응용프로그램을 통해 웹 서버 - 클라이언트 간 데이터를 전송하는 프로토콜이다.

>웹 리소스
- 웹에 콘텐츠를 제공하는 모든 것을 말한다.
- 텍스트, 이미지, 동영상 등의 정적파일과 클라이언트의 요청에 따라 생성되는 동적 콘텐츠 리소스로 이루어져있다.
 
>미디어 타입
- HTTP는 웹에서 전송되는 객체 각각에 MIME 타입이라는 데이터 포맷 라벨을 붙인다.
- `MIME(Multipurpose Internet Mail Extensions)`은 원래 이메일 시스템 사이에서 발생하는 메시지 관련 이슈를 해결하기 위해 설계되었다.
 HTTP에서도 멀티미디어 콘텐츠를 기술하고 라벨을 붙이기 위해 이를 채택하였다.
- 'Content-type: image/jpeg'에서 image가 주 타입(primary object type)이고, jpeg가 부 타입(specific subtype)이다.

>URI(Uniform Resource Identifier)
 - 서버 리소스를 고유하게 식별하고 위치를 지정하기 위한 식별자이다.
 - URI는 URL과 URN으로 이루어져있다. 오늘날 대부분의 URI는 URL이다.

>URL(Uniform Resource Locator)
 - URL은 특정 서버의 한 리소스에 대한 구체적인 위치와 접근 방법을 서술한다.
 - 대부분의 URL은 세 부분으로 이루어진 표준 포맷을 따른다. 첫 번째 부분은 스킴(scheme)이라고
  불리는데, 리소스에 접근하기 위해 사용되는 프로토콜을 의미한다. 보통 HTTP 프로토콜(http://)이다.
  두 번째 부분은 서버의 인터넷 주소를 제공한다. 마지막은 웹 서버의 리소스를 가리킨다.

>URN(Uniform Resource Name)
 - URN은 리소스의 위치에 독립적인 이름 역할을 한다. 따라서 리소스의 위치가 변하더라도 문제없이
  동작한다. 심지어 이름이 변하지 않는 한, 여러 종류의 네트워크 접속 프로토콜로 접근해도 문제없다.
 - 인프라 부재 등의 문제로 널리 채택되지 않고 있다.

>트랜잭션
 - HTTP 트랜잭션은 요청 명령과 응답 결과로 구성되어 있다. 이 상호작용은 HTTP 메시지라고 불리는
  정형화된 데이터 덩어리를 이용해 이루어진다.
 - HTTP 요청 메시지는 명령과 URI를 포함하고, HTTP 응답 메시지는 트랜잭션의 결과를 포함한다.

>메서드
 - HTTP는 HTTP 메서드라고 불리는 여러 가지 종류의 요청 명령을 지원한다.
 - 모든 HTTP 요청은 한 개의 메서드를 갖으며, 이는 서버에게 어떤 동작을 취해야 하는지를 말해준다.
  (웹페이지 로드, 게이트웨이 프로그램 실행, 파일 삭제 등)
  - 다음은 흔하게 쓰이는 5가지 HTTP 메서드이다.
  
| 메서드 명 | 설명                                                                |
|:--------|:-------:
| GET       | 서버에서 클라이언트로 지정한 리소스를 보내라                        |
| PUT       | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라 |
| DELETE    | 지정한 리소스를 서버에서 삭제하라                                   |
| POST      | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라         |
| HEAD      | 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라              |
|=====
{: rules="groups"}

* 상태 코드
 - 모든 HTTP 응답 메시지는 상태 코드와 함께 반환된다. 상태 코드는 클라이언트에게 요청이 성공
  했는지, 추가 조치가 필요한지 알려주는 세자리 숫자이다.
  (대표적인 예로 '404' - not found, '200' - OK 등이 있다.)

* 웹페이지는 여러 객체로 이루어질 수 있다. 즉, 리소스들의 모음이다. 또한, 리소스들에 대해 각각
  별개의 HTTP 트랜잭션을 필요로 한다.

* 메시지
 - HTTP 메시지는 이진 형식이 아닌 일반 텍스트 형식이다.
 - HTTP 메시지는 다음의 세 부분으로 이루어진다.
  1. 시작줄 : 요청이라면 무엇을 해야 하는지(메서드), 응답이라면 무슨 일이 일어났는지(상태코드)를
                   나타낸다.
  2. 헤더 : 시작줄 다음에는 0개 이상의 헤더 필드가 이어진다. 또한, 헤더는 빈 줄로 끝난다.
  3. 본문 : 어떤 종류의 데이터든 들어갈 수 있는 필드이다. 요청의 본문은 웹 서버로 데이터를 실어
                보내며, 응답의 본문은 클라이언트로 데이터를 반환한다.

* TCP/IP
 - HTTP는 애플리케이션 계층 프로토콜이다. 따라서 네트워크 통신의 핵심 세부사항에 관여하지
  않는다. 대신 신뢰성 있는 인터넷 전송 프로토콜인 TCP/IP를 사용한다.
 - HTTP 메시지는 TCP(Transmission Control Protocol) 커넥션을 통해 전송된다.
 - TCP는 오류없는 데이터 전송, 순차적 전달, 조각나지 않은 데이터 스트림을 지원한다.
- TCP/IP는 TCP와 IP가 층을 이루는, 패킷 교환 네트워크 프로토콜의 집합이다. 또한, 각 네트워크와
  하드웨어의 특성을 숨겨 신뢰성 있는 통신을 가능하게 해준다.
 - 일단 TCP 커넥션이 맺어지면, 클라이언트-서버 간에 교환되는 메시지의 손실, 손상, 순서의 변화가
  발생하지 않는다. 
 - HTTP 클라이언트가 서버에 메시지를 전송하기 위해서는 반드시 이들 사이에 TCP/IP 커넥션이
  맺어져야 한다.

<TCP/IP Protocol Stack>
 - 위 그림에서와 같이, HTTP 프로토콜은 TCP 위의 계층이다. HTTP는 메시지 데이터 전송을 위해
  TCP를 사용한다.

* 웹브라우저 연결의 기본 절차
 1. URL에서 호스트 명을 추출한다.
 2. 호스트 명을 DNS(Domain Name Service)를 이용하여 IP로 변환한다.
 3. URL에 포트번호가 있다면 추출한다.
 4. 웹브라우저는 웹 서버와 TCP 커넥션을 맺는다.
 5. 웹브라우저는 서버에 HTTP 요청을 보낸다.
 6. 서버는 웹브라우저에 HTTP 응답을 돌려준다.
 7. 커넥션이 닫히고, 웹브라우저는 해당 리소스를 출력한다.

* 텔넷(Telnet)을 이용한 통신
 - 텔넷은 사용자의 키보드를 목적지의 TCP 포트로, 출력 TCP 포트를 사용자 화면으로 연결해준다.
 - 보통 원격 터미널 세션을 위해 사용되지만, HTTP 서버를 포함한 일반적인 TCP 서버에 연결하기 위해
  사용될 수 도 있다.

* 프로토콜 버전
 1. HTTP/0.9
  - 1991년의 HTTP 프로토타입이다. 심각한 디자인 결함이 있고, 구식 클라이언트하고만 사용가능하다.
  - GET 메서드만을 지원하고, 멀티미디어 콘텐츠에 대한 MIME 타입, HTTP 헤더, 버전 번호는 지원
   하지 않는다. 본래 간단한 HTML 객체를 받아오기 위해 만들어졌다.

  2. HTTP/1.0
   - 널리 쓰이기 시작한 버전이다. 버전번호, HTTP 헤더, 추가 메서드, 멀티미디어 객체 처리가 추가
    되었으며, 웹페이지와 상호작용하는 폼이 실현되어있다. 그러나 잘 정의된 명세는 아니다.

  3. HTTP/1.0+
   - 오래 지속되는 'keep-alive' 커넥션, 가상 호스팅, 프록시 연결 등 여러 기능이 추가되며, 공식적이진
    않지만 사실상 표준으로 HTTP에 추가되었다.

  4. HTTP/1.1
   - HTTP 설계의 구조적 결함 교정, 성능 최적화, 잘못된 기능 제거에 집중된 버전이다. 웹 애플리케이션
    배포를 지원한다.

  5. HTTP/2.0
   - 이전 버전의 성능 문제를 개선하기 위해 구글의 SPDY 프로토콜을 기반으로 설계된 프로토콜이다.
    ko.wikipedia.org

* 프록시 서버(Proxy Server)
 - 클라이언트와 서버 사이에 위치하여, 클라이언트의 모든 HTTP 요청을 받아 서버로 전달한다(대개
  요청을 수정한 뒤).
 - 프록시는 주로 보안을 위해 사용된다. 모든 웹 트래픽 흐름 속에서 신뢰할 만한 중개자 역할을 한다.
  또한, 요청과 응답을 필터링한다. 예로 다운로드 시 바이러스 검출, 성인콘텐츠 필터링 등을 들 수 있다.

* 캐시
 - 웹캐시와 캐시 프록시는 자신을 거쳐 가는 문서들 중 자주 사용되는 것의 사본을 저장해두는 특별한
  종류의 HTTP 프록시 서버이다.
 - 클라이언트는 원격 서버에 접속하여 데이터를 가져올 필요가 없으므로 전송 시간을 절약 할 수 있고,
  불필요한 외부 연결을 하지 않아도 된다. 또한, 외부와의 트래픽을 줄여 네트워크 병목 현상을 방지할
  수 있다.

* 게이트웨이
- 다른 서버들의 중개자로 동작하는 특별한 서버이다. 주로 HTTP 트래픽을 다른 프로토콜로 변환하기
  위해 사용된다.
 - 게이트웨이는 스스로가 리소스를 갖고 있는 진짜 서버인 것처럼 요청을 다룬다. 따라서 클라이언트는
  자신이 게이트웨이와 통신하고 있음을 알아차리지 못한다.
 - HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 받아, FTP 프로토콜을 사용하여 문서를 가져
  온다. 이후 이를 HTTP 메시지에 담아 클라이언트에 응답한다.

* 터널
 - 두 커넥션 사이에서 raw data를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션이다. 주로
  비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용된다.
 - HTTP 터널을 활용하는 예로, 암호화된 SSL 트래픽을 HTTP 커넥션으로 전송함으로써 웹 트래픽만
  허용하는 사내 방화벽을 통과시키는 것이 있다.

* (사용자) 에이전트
 - HTTP 요청을 만들어주는 클라이언트 애플리케이션이다. 대표적인 예가 웹브라우저이다.
 - 사람의 통제 없이 스스로 웹을 돌아다니며 HTTP 트랜잭션을 일으키고, 콘텐츠를 받아오는 자동화된
  에이전트도 존재한다. 보통 '스파이더'나 '웹로봇'과 같이 다채로운 이름을 갖고 있다.


>Reference
---
HTTP: The Definitive Guide